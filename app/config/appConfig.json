{
  "$schema": "../../../flux-eco-http-server/app/schema/flux-eco-http-server-schema.json",
  "endpoints": {
    "http": {
      "serverConfig": {
        "port": "${SERVER_PORT}",
        "host": "${SERVER_HOST}"
      },
      "policies": {
        "allowedHeaders": "${SERVER_REQUIRED_HEADERS}",
        "allowedIps": "${SERVER_ALLOWED_IPS}"
      },
      "middlewares": [
        "PoliciesMiddleware",
        "LoggingMiddleware",
        "ErrorHandlingMiddleware"
      ],
      "actions": [
        {
          "method": "GET",
          "path": "/getRepositoryTree",
          "actionCallable": "getRepositoryTree"
        }
      ]
    }
  },
  "bindings": {
    "iliasDatabase": {
      "serverConfig": {
        "port": "${DATABASE_PORT}",
        "host": "${DATABASE_HOST}",
        "database": "${DATABASE_DATABASE}",
        "password": "${DATABASE_PASSWORD}",
        "username": "${DATABASE_USERNAME}"
      },
      "boundActions": {
        "getRepositoryTree": "handleQuery"
      }
    }
  }
}